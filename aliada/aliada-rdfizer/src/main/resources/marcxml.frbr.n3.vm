#set($Concept = "#skos('Concept')")
#set($work_s ="#uri('F1_Work' $frbr.workID)")
#set($expression_s = "#uri('F2_Expression' $frbr.expressionID)")
#set($manifestation_s = "#uri_literal('F3_Manifestation_Product_Type' $frbr.manifestationID)")
#set($is_a = "#rdf('type')")
#set($rdfs_label = "#rdfs('label')")
#set($P1_is_identified_by = "#ecrm('P1_is_identified_by')")	
#set($P3_has_note = "#ecrm('P3_has_note')")
#set($P2_has_type = "#ecrm('P2_has_type')")
#set($P149_is_identified_by = "#ecrm('P149_is_identified_by')")
#set($E55_Type = "#ecrm('E55_Type')")
#set($CLP2_should_have_type = "#efrbroo('CLP2_should_have_type')")
#set($E35_Title = "#ecrm('E35_Title')")
#set($P102_has_title = "#ecrm('P102_has_title')")
#set($E90_Symbolic_Object = "#ecrm('E90_Symbolic_Object')")
#set($F13_Identifier = "#ecrm('F13_Identifier')")
#set($F27_Work_Conception = "#efrbroo('F27_Work_Conception')")
#set($R16i_was_initiated_by = "#efrbroo('R16i_was_initiated_by')")
#set($E53_Place = "#ecrm('E53_Place')")
#set($E27_Site = "#ecrm('E27_Site')")
#set($P129_is_about = "#ecrm('P129_is_about')")
#set($E47_Spatial_Coordinates = "#ecrm('E47_Spatial_Coordinates')")
#set($P59i_is_located_on_or_within = "#ecrm('P59i_is_located_on_or_within')")
#set($P87_is_identified_by = "#ecrm('P87_is_identified_by')")
#set($F4_Manifestation_Singleton = "#efrbroo('F4_Manifestation_Singleton')")
#set($P104_is_subject_to = "#ecrm('P104_is_subject_to')")
#set($P74_has_current_or_former_residence  = "#ecrm('P74_has_current_or_former_residence')")
#set($E44_Place_Appellation  = "#ecrm('E44_Place_Appellation')")
#set($P14i_performed  = "#ecrm('P14i_performed')")
#set($P103_was_intended_for  = "#ecrm('P103_was_intended_for')")
#set($F24_Publication_Expression = "#efrbroo('F24_Publication_Expression')")

$work_s $is_a #efrbroo('F1_Work') . 
$work_s $is_a #ecrm("E89_PropositionalObject") . 
$expression_s $is_a #efrbroo('F2_Expression') . 
$expression_s $is_a #efrbroo('E89_PropositionalObject') .
$expression_s $is_a #ecrm('E33_Linguistic_Object') . 
$manifestation_s $is_a #efrbroo('F3_Manifestation_Product_Type') . 
$work_s #efrbroo('R40_has_representative_expression') $expression_s . 
$expression_s #efrbroo('R4_carriers_provided_by') $manifestation_s . 
## WORK
##Control Field Mapping
#set($value006 = $xpath.cf("006",$root))
#if($value006 && $value006.length() >= 18)
#simplest_mapping_of_string ($work_s $value006.substring(1,5) "E55_Type" $E55_Type $P103_was_intended_for)
#simplest_mapping_of_string ($work_s $value006.substring(1,4) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(3,4) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(4,5) "E55_Type" $E55_Type $P103_was_intended_for)
#simplest_mapping_of_string ($work_s $value006.substring(6,7) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(7,10) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(8,10) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(13,14) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(15,16) "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_of_string ($work_s $value006.substring(16,17) "E55_Type" $E55_Type $P2_has_type)
#end
##Data field mapping
#set($_100s = $xpath.many("datafield[@tag='100']",$root))
#foreach($_100 in $_100s)
	#set($v = $xpath.combine($_100,"tnp"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_110s = $xpath.many("datafield[@tag='110']",$root))
#foreach($_110 in $_110s)
	#set($v = $xpath.combine($_110,"tnp"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#simplest_mapping_with_repeatable_tag ($work_s "100" "k" $root "E55_Type" $E55_Type $P2_has_type)
#set($_111s = $xpath.many("datafield[@tag='111']",$root))
#foreach($_111 in $_111s)
	#set($v = $xpath.combine($_111,"tnp"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#simplest_mapping_with_repeatable_tag ($work_s "111" "k" $root "E55_Type" $E55_Type $P2_has_type)
#set($_130s = $xpath.many("datafield[@tag='130']",$root))
#foreach($_130 in $_130s)
	#set($v = $xpath.combine($_130,"anpt"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#simplest_mapping_with_repeatable_tag ($work_s "130" "k" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "130" "m" $root "E55_Type" $E55_Type $P2_has_type)
#set($_240s = $xpath.many("datafield[@tag='240']",$root))
#foreach($_240 in $_240s)
	#set($v = $xpath.combine($_240,"anp"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_243s = $xpath.many("datafield[@tag='243']",$root))
#foreach($_243 in $_243s)
	#set($v = $xpath.combine($_243,"anp"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_600s = $xpath.many("datafield[@tag='600']",$root))
#foreach($_600 in $_600s)
	#set($v = $xpath.combine($_600,"tnp"))
	#hr_label($work_s $v) 
	#simplest_mapping_with_no_repeatable_label($work_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#simplest_mapping_with_repeatable_tag ($work_s "240" "k" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "240" "m" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "243" "k" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "243" "m" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "245" "k" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "504" "a" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "600" "m" $root "E55_Type" $E55_Type $P2_has_type)
#simplest_mapping_with_repeatable_tag ($work_s "600" "k" $root "E55_Type" $E55_Type $P2_has_type)

#defined_mapping_with_no_repeatable_tag_to_date_relation( "100" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "110" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "111" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "130" "d" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "130" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "240" "d" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "240" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "243" "d" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "243" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "245" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#defined_mapping_with_no_repeatable_tag_to_date_relation( "245" "g" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 

#mapping_with_not_repeatable_tag_three_entities($xpath.df("130","r",$root) $work_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("130","s",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("240","r",$root) $work_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("240","s",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("243","r",$root) $work_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("243","s",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_repeatable_tag_four_entities($xpath.dfs("255","c",$root) $work_s "E27_Site" "E53_Place" "E47_Spatial_Coordinates" "#ecrm('E27_Site')" "#ecrm('E53_Place')" "#ecrm('E47_Spatial_Coordinates')" "#ecrm('P129_is_about')" "#ecrm('P59i_is_located_on_or_within')" "#ecrm('P87_is_identified_by')" )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("255","d",$root) $work_s "E27_Site" "E53_Place" "E47_Spatial_Coordinates" "#ecrm('E27_Site')" "#ecrm('E53_Place')" "#ecrm('E47_Spatial_Coordinates')" "#ecrm('P129_is_about')" "#ecrm('P59i_is_located_on_or_within')" "#ecrm('P87_is_identified_by')" )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("255","e",$root) $work_s "E27_Site" "E53_Place" "E47_Spatial_Coordinates" "#ecrm('E27_Site')" "#ecrm('E53_Place')" "#ecrm('E47_Spatial_Coordinates')" "#ecrm('P129_is_about')" "#ecrm('P59i_is_located_on_or_within')" "#ecrm('P87_is_identified_by')" )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("255","g",$root) $work_s "E27_Site" "E53_Place" "E47_Spatial_Coordinates" "#ecrm('E27_Site')" "#ecrm('E53_Place')" "#ecrm('E47_Spatial_Coordinates')" "#ecrm('P129_is_about')" "#ecrm('P59i_is_located_on_or_within')" "#ecrm('P87_is_identified_by')" )
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "510" "a" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#efrbroo('R16i_was_initiated_by')" "#ecrm('P16_used_specific_object')")
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "510" "b" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#efrbroo('R16i_was_initiated_by')" "#ecrm('P16_used_specific_object')")
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "510" "c" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#efrbroo('R16i_was_initiated_by')" "#ecrm('P16_used_specific_object')")
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "510" "a" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#ecrm('P16i_was_used_for')" "#efrbroo('R16_initiated')")
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "510" "b" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#ecrm('P16i_was_used_for')" "#efrbroo('R16_initiated')")
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "510" "c" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#ecrm('P16i_was_used_for')" "#efrbroo('R16_initiated')")
#mapping_aliada_was_initiated_with_repeatable_tag($work_s "525" "a" $root  "F27_Work_Conception" "#efrbroo('F27_Work_Conception')" "#efrbroo('F1_Work')" "#ecrm('P16i_was_used_for')" "#efrbroo('R16_initiated')")

#defined_mapping_with_repeatable_tag_to_date_relation( "600" "f" $root $F27_Work_Conception "F27_Work_Conception" $R16i_was_initiated_by $work_s) 
#mapping_with_repeatable_tag_three_entities($xpath.dfs("600","r",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
#wk_exp_ner("522" "a" $root $work_s)
#wk_exp_ner("525" "a" $root $work_s)

## MANIFESTATIONre
#set($controlNumber = $xpath.cf("001",$root))
#if ($controlNumber)
    #set($id_s = "#uri('E75_Conceptual_Object_Appellation' $controlNumber)")
    $id_s $is_a #ecrm("E75_Conceptual_Object_Appellation") .
    $id_s $P3_has_note "$controlNumber" .
    $manifestation_s $P149_is_identified_by $id_s .
#end	

##Control Field Mapping
#set($cf006 = $xpath.cf("006",$root))
#if($cf006 && $cf006.length() >= 18)
	#simplest_mapping_of_string ($manifestation_s $cf006.substring(4,5) "E55_Type" $E55_Type "#ecrm('CLP2_should_have_type')")
	#simplest_mapping_of_string ($F4_Manifestation_Singleton $cf006.substring(4,5) "E55_Type" $E55_Type $P2_has_type)
	#simplest_mapping_of_string ($manifestation_s $cf006.substring(5,6) "E55_Type" $E55_Type "#ecrm('CLP2_should_have_type')")
	#simplest_mapping_of_string ($manifestation_s $cf006.substring(5,6) "E55_Type" $E55_Type "#ecrm('CLP2_should_have_type')")
	#simplest_mapping_of_string ($F4_Manifestation_Singleton $cf006.substring(5,6) "E55_Type" $E55_Type $P2_has_type)
#end

#set($_210 = $xpath.one("datafield[@tag='210']",$root))
#if($_210)
	#set($v = $xpath.combine($_210,"a"))
	#hr_label($manifestation_s $v) 
	#simplest_mapping_with_no_repeatable_label($manifestation_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_222 = $xpath.one("datafield[@tag='222']",$root))
#if($_222)
	#set($v = $xpath.combine($_222,"a"))
	#hr_label($manifestation_s $v) 
	#simplest_mapping_with_no_repeatable_label($manifestation_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_242 = $xpath.one("datafield[@tag='242']",$root))
#if($_242)
	#set($v = $xpath.combine($_242,"anp"))
	#hr_label($manifestation_s $v) 
	#simplest_mapping_with_no_repeatable_label($manifestation_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_245 = $xpath.one("datafield[@tag='245']",$root))
#if($_245)
	#set($v = $xpath.combine($_245,"anp"))
	#hr_label($manifestation_s $v) 
	#simplest_mapping_with_no_repeatable_label($manifestation_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_246s = $xpath.many("datafield[@tag='246']",$root))
#foreach($_246 in $_246s)
	#set($v = $xpath.combine($_246,"anp"))
	#hr_label($manifestation_s $v) 
	#simplest_mapping_with_no_repeatable_label($manifestation_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#set($_247s = $xpath.many("datafield[@tag='247']",$root))
#foreach($_247 in $_247s)
	#set($v = $xpath.combine($_247,"anp"))
	#hr_label($manifestation_s $v) 
	#simplest_mapping_with_no_repeatable_label($manifestation_s $v "E35_Title" $E35_Title $P102_has_title)
#end
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "130" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "240" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "242" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "243" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "245" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_repeatable_tag ($manifestation_s "246" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_repeatable_tag ($manifestation_s "247" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#mapping_with_repeatable_tag_four_entities($xpath.dfs("250","a",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("250","b",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "300" "a" $root "E54_Dimension" "#ecrm('E54_Dimension')" "#efrbroo('CLP43_should_have_dimension')" "#aliadaconcept('MARC/5')")
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "300" "c" $root "E54_Dimension" "#ecrm('E54_Dimension')" "#efrbroo('CLP43_should_have_dimension')" "#aliadaconcept('MARC/6')")
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "300" "f" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "300" "g" $root "E54_Dimension" "#ecrm('E54_Dimension')" "#efrbroo('CLP43_should_have_dimension')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "a" $root "#aliada_p3('physical_medium')")
#simplest_mapping_with_no_repeatable_tag ($manifestation_s "340" "b" $root "E54_Dimension" "#ecrm('E54_Dimension')" "#efrbroo('CLP43_should_have_dimension')" "#aliadaconcept('MARC/6')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "c" $root "#aliada_p3('physical_medium')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "e" $root "#aliada_p3('physical_medium')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "d" $root "#aliada_p3('capture_mode')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "f" $root "#aliada_p3('playing_speed')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "f" $root "#aliada_p3('reduction_ratio')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "340" "l" $root "#aliada_p3('system_requirements')")
#mapping_with_repeatable_tag_three_entities($xpath.dfs("362","a",$root) $manifestation_s "F13_Identifier" "F12_Name" $F13_Identifier "#efrbroo('F12_Name')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","a",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","n",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","p",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","v",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","w",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","x",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","0",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","6",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("440","8",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("490","a",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("490","v",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#mapping_with_repeatable_tag_four_entities($xpath.dfs("490","x",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#simplest_mapping_with_repeatable_tag ($manifestation_s "505" "u" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#simplest_mapping_with_repeatable_tag ($manifestation_s "506" "a" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "506" "b" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "506" "c" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "506" "d" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "506" "e" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "506" "u" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#simplest_mapping_with_repeatable_tag ($manifestation_s "508" "a" $root "E33_Linguistic_Object" "#ecrm('E33_Linguistic_Object')" "#ecrm('P148_has_component')" "#aliadaconcept('MARC/1')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "510" "x" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#simplest_mapping_with_repeatable_tag ($manifestation_s "511" "a" $root "E33_Linguistic_Object" "#ecrm('E33_Linguistic_Object')" "#ecrm('P148_has_component')" "#aliadaconcept('MARC/1')")
#mapping_with_repeatable_tag_three_entities($xpath.dfs("515","a",$root) $manifestation_s "F13_Identifier" "F12_Name" $F13_Identifier "#efrbroo('F12_Name')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "514" "u" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#simplest_mapping_with_repeatable_tag ($manifestation_s "520" "u" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#simplest_mapping_with_repeatable_tag ($manifestation_s "524" "a" $root "E35_Title" $E35_Title $P102_has_title)
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "530" "a" $root "#aliada_p3('has_an_alternate')")
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "530" "a" $root "#aliada_p3('is_an_alternate_to')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "530" "b" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "530" "c" $root "E30_Right" "#ecrm('E30_Right')" "#efrbroo('CLP104_is_subject')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "530" "d" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#simplest_mapping_with_repeatable_tag ($manifestation_s "530" "u" $root "F13_Identifier" "#efrbroo('F13_Identifier')" $P1_is_identified_by)
#mapping_aliada_p3_has_note_with_repeatable_tag($manifestation_s "533" "a" $root "#aliada_p3('reproduction_characteristics')")
#simplest_mapping_with_repeatable_tag ($manifestation_s "533" "7" $root "E55_Type" $E55_Type $CLP2_should_have_type)
#mapping_with_repeatable_tag_four_entities($xpath.dfs("533","7",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type)
#mapping_with_repeatable_tag_four_entities($xpath.dfs("533","7",$root) $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
#simplest_mapping_with_repeatable_tag ($manifestation_s "600" "h" $root "E55_Type" $E55_Type $CLP2_should_have_type)
## START EXPRESSION
##Control Field Mapping
#set($value006 = $xpath.cf("006",$root))
#if($value006 && $value006.length() >= 18)
	#simplest_mapping_of_string ($expression_s $value006.substring(0,1) "E55_Type" $E55_Type $P2_has_type)
	#simplest_mapping_of_string ($expression_s $value006.substring(1,2) "E55_Type" $E55_Type $P2_has_type)
	#simplest_mapping_of_string ($expression_s $value006.substring(2,3) "E55_Type" $E55_Type $P2_has_type)
	#simplest_mapping_of_string ($expression_s $value006.substring(8,9) "E55_Type" $E55_Type $P2_has_type)
	#set($value006_01 = $value006.substring(0,1))
	#set($value006_02 = $value006.substring(1,2))
#if($value006_01)
	#mapping_aliada_self_contained_to_control_field_tag($expression_s $value006_01 "F22_Self-Contained_Expression" "F18_Serial_work" "#efrbroo('F22_Self-Contained_Expression')" "#efrbroo('F18_Serial_work')" "#efrbroo('R3i_realises')" "#aliada_p3('expected_frequency')")
#end

#if($value006_02)
	#mapping_aliada_self_contained_to_control_field_tag($expression_s $value006_02 "F22_Self-Contained_Expression" "F18_Serial_work" "#efrbroo('F22_Self-Contained_Expression')" "#efrbroo('F18_Serial_work')" "#efrbroo('R3i_realises')" "#aliada_p3('expected_frequency')")
#end

#end
#set($value008 = $xpath.cf("008",$root))
#if($value008 && $value008.length() >= 40)
#set($value008_7_10 = $value008.substring(6,9))
	#if($value008_7_10)
		#mapping_with_not_repeatable_tag_four_entities($value008_7_10 $manifestation_s "F24_Publication_Expression" "E33_Linguistic_Object" "E55_Type" $F24_Publication_Expression "#ecrm('E33_Linguistic_Object')" "#ecrm('E55_Type')" "#ecrm('CLR6_should_carry')" "#ecrm('P148_has_component')" $P2_has_type )
	#end
#end

#simplest_mapping_with_no_repeatable_tag($expression_s "100" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")
#simplest_mapping_with_no_repeatable_tag($expression_s "110" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")
#simplest_mapping_with_no_repeatable_tag($expression_s "111" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")
#simplest_mapping_with_no_repeatable_tag($expression_s "130" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")
#simplest_mapping_with_no_repeatable_tag($expression_s "100" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")
#simplest_mapping_with_no_repeatable_tag($expression_s "240" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")
#simplest_mapping_with_no_repeatable_tag($expression_s "243" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")

#mapping_aliada_self_contained_with_repeatable_tag($expression_s "310" "a" $root "F22_Self-Contained_Expression" "F18_Serial_work" "#efrbroo('F22_Self-Contained_Expression')" "#efrbroo('F18_Serial_work')" "#efrbroo('R3i_realises')" "#aliada_p3('expected_frequency')")
#mapping_aliada_self_contained_with_repeatable_tag($expression_s "321" "a" $root "F22_Self-Contained_Expression" "F18_Serial_work" "#efrbroo('F22_Self-Contained_Expression')" "#efrbroo('F18_Serial_work')" "#efrbroo('R3i_realises')" "#aliada_p3('expected_frequency')")

#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "342" "o" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "a" $root "#aliada_p3('file_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "b" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "c" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "d" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "e" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "f" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "g" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "i" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "q" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "6" $root "#aliada_p3('special_characteristics')")
#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "352" "8" $root "#aliada_p3('special_characteristics')")

#mapping_aliada_has_component_with_repeatable_tag($expression_s "505" "a" $root "F24_Publication_Expression" $F24_Publication_Expression "#efrbroo('F2_Expression')" "#efrbroo('R5_has_component')" "#aliadaconcept('summary')")
#mapping_aliada_has_component_with_repeatable_tag($expression_s "505" "g" $root "F24_Publication_Expression" $F24_Publication_Expression "#efrbroo('F2_Expression')" "#efrbroo('R5_has_component')" "#aliadaconcept('summary')")
#mapping_aliada_has_component_with_repeatable_tag($expression_s "505" "r" $root "F24_Publication_Expression" $F24_Publication_Expression "#efrbroo('F2_Expression')" "#efrbroo('R5_has_component')" "#aliadaconcept('summary')")
#mapping_aliada_has_component_with_repeatable_tag($expression_s "505" "t" $root "F24_Publication_Expression" $F24_Publication_Expression "#efrbroo('F2_Expression')" "#efrbroo('R5_has_component')" "#aliadaconcept('summary')")
#mapping_aliada_has_component_with_repeatable_tag($expression_s "520" "a" $root "F24_Publication_Expression" $F24_Publication_Expression "#efrbroo('F2_Expression')" "#efrbroo('R5_has_component')" "#aliadaconcept('summary')")

#mapping_aliada_p3_has_note_with_repeatable_tag($expression_s "514" "m" $root "#aliada_p3('special_characteristics')")
#simplest_mapping_with_repeatable_tag ($expression_s "516" "a" $root "E55_Type" $E55_Type $P2_has_type)

#simplest_mapping_with_no_repeatable_tag($expression_s "600" "l" $root "E56_Language" "#ecrm('E56_Language')" "#ecrm('P72_has_language')")

#wk_exp_ner("520" "a" $root $expression_s)
#wk_exp_ner("520" "b" $root $expression_s)

##260
#set($tagValues = $xpath.dfs("260","b",$root))
#foreach($tagValue in $tagValues)
	#set($value = $function.escape($function.clean($tagValue.textContent)))
	#set($pub_exp_s = "#uri('F24_Publication_Expression' $value)")
	#set($lin_obj_s = "#uri('E33_Linguistic_Object' $value)")
	$pub_exp_s $is_a #efrbroo("F24_Publication_Expression") . 
	$pub_exp_s #efrbroo("R14_incorporates") $expression_s . 
	$pub_exp_s #ecrm('P106_is_composed_of') $lin_obj_s . 
	$lin_obj_s $is_a #ecrm("E33_Linguistic_Object") . 
	$lin_obj_s $P3_has_note "$value" . 
	$lin_obj_s $P2_has_type #aliadaconcept('MARC/3') . 
#end
#set($tagValues = $xpath.dfs("260","b",$root))
#foreach($tagValue in $tagValues)
	#set($value = $function.escape($function.clean($tagValue.textContent)))
	#set($publisher_appellation_s = "#uri('E82_Actor_Appellation' $value)")
	#set($publisher_actor_s = "#uri('E39_Actor' $value)")
	#set($pub_event_s = "#uri('F30_Publication_Event' $value)")
	#set($lin_obj_s = "#uri('E33_Linguistic_Object' $value)")
	#set($pub_exp_s = "#uri('F24_Publication_Expression' $value)")
	$pub_exp_s $is_a #efrbroo("F24_Publication_Expression") . 
	$pub_exp_s #efrbroo("R14_incorporates") $expression_s . 
	$pub_exp_s #ecrm('P106_is_composed_of') $lin_obj_s . 
	$pub_event_s $is_a #efrbroo("F30_Publication_Event") . 
	$pub_event_s #efrbroo("R24_created") $pub_exp_s . 
	$pub_event_s #ecrm('P14_carried_out_by') $publisher_actor_s . 
	$publisher_actor_s $is_a #ecrm("E39_Actor") . 
	$publisher_actor_s $rdfs_label "$value" . 
	$publisher_actor_s #ecrm('P131_is_identified_by') $publisher_appellation_s . 
	$publisher_appellation_s $is_a #ecrm("E82_Actor_Appellation") . 
	$publisher_appellation_s $P3_has_note "$value" .
	$lin_obj_s $is_a #ecrm("E33_Linguistic_Object") . 
	$lin_obj_s $P3_has_note "$value" . 
	$lin_obj_s $P2_has_type #aliadaconcept('MARC/4') . 
#end	
#set($tagValues = $xpath.dfs("260","c",$root))
#foreach($tagValue in $tagValues)
	#set($value = $function.escape($tagValue.textContent))
	#set($pub_exp_s = "#uri('F24_Publication_Expression' $value)")
	#set($lin_obj_s = "#uri('E33_Linguistic_Object' $value)")
	#set($pub_exp_s = "#uri('F24_Publication_Expression' $value)")
	#set($pub_event_s = "#uri('F30_Publication_Event' $value)")
	#set($time_span_s = "#uri('E52_Time-Span' $value)")
	$pub_exp_s $is_a #efrbroo("F24_Publication_Expression") . 
	$pub_exp_s #efrbroo("R14_incorporates") $expression_s . 
	$pub_exp_s #ecrm('P106_is_composed_of') $lin_obj_s . 
	$lin_obj_s $is_a #ecrm("E33_Linguistic_Object") . 
	$lin_obj_s $P3_has_note "$value" . 
	$lin_obj_s $P2_has_type #aliadaconcept('MARC/5') . 
	$pub_event_s $is_a #efrbroo("F30_Publication_Event") . 
	$pub_event_s #efrbroo("R24_created") $pub_exp_s . 
	$pub_event_s #ecrm('P4_has_time-span') $time_span_s . 
	$time_span_s $is_a #ecrm("E52_Time-Span") . 
	$time_span_s #ecrm('P82_at_some_time_within') "$value" . 
#end	
#simplest_mapping_with_repeatable_tag ($expression_s "242" "c" $root "E33_Linguistic_Object" "#ecrm('E33_Linguistic_Object')" "#ecrm('P148_has_component')" "#aliadaconcept('MARC/1')")
#simplest_mapping_with_repeatable_tag ($expression_s "245" "c" $root "E33_Linguistic_Object" "#ecrm('E33_Linguistic_Object')" "#ecrm('P148_has_component')" "#aliadaconcept('MARC/1')")
#simplest_mapping_with_no_repeatable_tag ($expression_s "254" "a" $root "E55_Type" $E55_Type $P2_has_type)

#mapping_aliada_instanced_with_repeatable_tag($expression_s "255" "a" $root "E36_Visual_Item" "E1_CRM_Entity" "#ecrm('E36_Visual_Item')" "#ecrm('E1_CRM_Entity')" "#aliadaconcept('cartographicimage')" "#ecrm('P138_represents')") 
#mapping_aliada_instanced_with_repeatable_tag($expression_s "255" "b" $root "E36_Visual_Item" "E1_CRM_Entity" "#ecrm('E36_Visual_Item')" "#ecrm('E1_CRM_Entity')" "#aliadaconcept('cartographicimage')" "#ecrm('P138_represents')") 


#simplest_mapping_with_no_repeatable_tag ($expression_s "256" "a" $root "E54_Dimension" "#ecrm('E54_Dimension')" "#ecrm('P43_has_dimension')")
#simplest_mapping_with_no_repeatable_tag ($expression_s "306" "a" $root "E54_Dimension" "#ecrm('E54_Dimension')" "#ecrm('P43_has_dimension')")

#mapping_aliada_instanced_with_no_repeatable_tag($expression_s "507" "b" $root "E36_Visual_Item" "E1_CRM_Entity" "#ecrm('E36_Visual_Item')" "#ecrm('E1_CRM_Entity')" "#aliadaconcept('cartographicimage')" "#ecrm('P138_represents')") 

#mapping_with_not_repeatable_tag_three_entities($xpath.df("130","o",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("240","o",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("243","o",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_not_repeatable_tag_three_entities($xpath.df("245","s",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")

#mapping_with_repeatable_tag_three_entities($xpath.dfs("600","o",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
#mapping_with_repeatable_tag_three_entities($xpath.dfs("600","s",$root) $expression_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")

## PERSON
#if ($frbr.personID && !$frbr.personID.isEmpty())
	#foreach($entry in $frbr.personID.entrySet())
		#set($tag = $entry.getKey())
		#set($uris = $entry.getValue())
		#if ($uris && !$uris.isEmpty())
			#set($fields = $xpath.many("datafield[@tag='${tag}']",$root))
			#foreach($uri in $uris)
				#set($field = $fields.get($velocityCount))
				#if ($field)
	        		#set($person_s = "#uri_literal('E21_Person' $uri)")
	        		$person_s $is_a #ecrm('E21_Person') .
					#set($txt = $xpath.combine($field, "abcgu"))
					#hr_label($person_s $txt) 
					#simplest_mapping_with_no_repeatable_label ($person_s $txt "E82_Actor_Appellation" "#ecrm('E82_Actor_Appellation')" "#ecrm('P131_is_identified_by')")
	        		#simplest_mapping_with_no_repeatable_node ($person_s $field "c" $root "E55_Type" $E55_Type $P2_has_type)
	        		#set($tagValue = $xpath.df("subfield[@code='b']", $field))
					#mapping_with_not_repeatable_tag_three_entities($tagValue $person_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier $E90_Symbolic_Object $P1_is_identified_by "#efrbroo('R8_consists_of')")
					#defined_mapping_with_no_repeatable_node_to_date_relation($field "d" $root "#ecrm('E7_Activity')" "E7_Activity" "#ecrm('P14B_performed')" $person_s) 					
				#end	
			#end	
    	#end	
	#end	
#end	

## CORPORATE BODY
#if ($frbr.corporateBodyID && !$frbr.corporateBodyID.isEmpty())
	#foreach($entry in $frbr.corporateBodyID.entrySet())
		#set($tag = $entry.getKey())
		#set($uris = $entry.getValue())
		#if ($uris && !$uris.isEmpty())
			#set($fields = $xpath.many("datafield[@tag='${tag}']",$root))
			#foreach($uri in $uris)
				#set($field = $fields.get($velocityCount))
				#if($field)
	        		#set($corporate_s = "#uri_literal('F11_Corporate_Body' $uri)")
	        		$corporate_s $is_a #efrbroo('F11_Corporate_Body') . 
					#set($txt = $xpath.combine($field, "abcu"))
					#hr_label($corporate_s $txt) 
					#simplest_mapping_with_no_repeatable_label ($corporate_s $txt "E82_Actor_Appellation" "#ecrm('E82_Actor_Appellation')" "#ecrm('P131_is_identified_by')")
					#set($tagValue = $xpath.df("subfield[@code='b']", $field))
					#mapping_with_not_repeatable_tag_three_entities($tagValue $corporate_s "F13_Identifier" "E90_Symbolic_Object" $F13_Identifier "#ecrm('E90_Symbolic_Object')" $P1_is_identified_by "#efrbroo('R8_consists_of')")
					#simplest_mapping_with_no_repeatable_node ($corporate_s $field "c" $root "E53_Place" $E53_Place $P74_has_current_or_former_residence)
					
					#set($tagValue = $xpath.df("subfield[@code='c']", $field))
					#mapping_with_not_repeatable_tag_four_entities($tagValue $corporate_s "E7_Activity" "E53_Place" "E44_Place_Appellation" "#ecrm('E7_Activity')" $E53_Place $E44_Place_Appellation "#ecrm('P14i_performed')" "#ecrm('P7_took_place_at')" $P87_is_identified_by)
										
					#set($tagValue = $xpath.df("subfield[@code='d']", $field))
					#mapping_with_not_repeatable_tag_four_entities($tagValue $corporate_s "E7_Activity" "E52_Time-Span" "E50_Date" "#ecrm('E7_Activity')" "#ecrm('E52_Time-Span')" "#ecrm('E50_Date')" "#ecrm('P14i_performed')" "#ecrm('P4_has_time-span')" "#ecrm('P78_is_identified_by')" )
					#if($tag == "533")
						#set($tagValue = $xpath.df("subfield[@code='c']", $field))						
						#mapping_with_repeatable_tag_three_entities($tagValue $corporate_s "F32_Carrier_Production_Event" "F3_Manifestation_Product_Type" "#efrbroo('F32_Carrier_Production_Event')" "#efrbroo('F3_Manifestation_Product_Type')" $P14i_performed "#efrbroo('R26_produced_things_of_type')")
						#mapping_with_repeatable_tag_three_entities($tagValue $corporate_s "F28_Expression_Creation" "F4_Manifestation_Singleton" "#efrbroo('F28_Expression_Creation')" "#efrbroo('F4_Manifestation_Singleton')" $P14i_performed "#efrbroo('R18_created')")
						#mapping_with_repeatable_tag_three_entities($tagValue $corporate_s "E12 Production" "F4_Manifestation_Singleton" "#efrbroo('E12 Production')" "#efrbroo('F4_Manifestation_Singleton')" $P14i_performed "#ecrm('P108_has_produced')")
						#mapping_with_repeatable_tag_four_entities($tagValue $corporate_s "F30_Publication_Event" "F24_Publication_Expression" "F3_Manifestation_Product_Type" "#efrbroo('F30_Publication_Event')" "#efrbroo('F24_Publication_Expression')" "#efrbroo('F3_Manifestation_Product_Type')" $P14i_performed "#ecrm('R24_created')" "#ecrm('CLR6_should_carry')" )
					#end				
					#if($tag == "600")
						#simplest_mapping_with_repeatable_node ($corporate_s $field "u" $root "E74_Group" "#ecrm('E74_Group')" "#ecrm('P107i_is_current_or_former_member_of')")	
					#end	
				#end	
		#end	
    	#end	
	#end	
#end	

##Place
#if ($frbr.placeID && !$frbr.placeID.isEmpty())
	#foreach($entry in $frbr.placeID.entrySet())
		#set($tag = $entry.getKey())
		#set($uris = $entry.getValue())
		#if ($uris && !$uris.isEmpty())
			#set($fields = $xpath.many("datafield[@tag='${tag}']",$root))
			#foreach($uri in $uris) 			
				#set($field = $fields.get($velocityCount))
				#if($field)	
					#set($place_s = "#uri('E53_Place' $uri)")
					$place_s $is_a #ecrm('E53_Place') .
					#simplest_mapping_with_repeatable_node($place_s $field "z" $root "E44_Place_Appellation" "#ecrm('E44_Place_Appellation')" $P87_is_identified_by)
					#if($tag == "650")
					  #simplest_mapping_with_repeatable_node($place_s $field "c" $root "E44_Place_Appellation" "#ecrm('E44_Place_Appellation')" $P87_is_identified_by)
					#end
					#if($tag == "651")
					  #simplest_mapping_with_repeatable_node($place_s $field "a" $root "E44_Place_Appellation" "#ecrm('E44_Place_Appellation')" $P87_is_identified_by)
					#end
				#end	
			#end	
    	#end	
	#end	
#end	
#simplest_mapping_with_repeatable_tag($E53_Place "522" "a" $root "E44_Place_Appellation" "#ecrm('E44_Place_Appellation')" $P87_is_identified_by)

##Concept
#if ($frbr.conceptID && !$frbr.conceptID.isEmpty())
	#foreach($entry in $frbr.conceptID.entrySet())
		#set($tag = $entry.getKey())
		#set($uris = $entry.getValue())
		#if ($uris && !$uris.isEmpty())
			#set($fields = $xpath.many("datafield[@tag='${tag}']",$root))
			#foreach($uri in $uris) 
				#set($field = $fields.get($velocityCount))
				#if($field)	
	        		#set($concept_s = "#uri_literal('F6_Concept' $uri)")
	        		$concept_s $is_a #efrbroo('F6_Concept') .
					#simplest_mapping_with_repeatable_node($concept_s $field "x" $root "E41_Appellation" "#ecrm('E41_Appellation')" $P1_is_identified_by)
					#if($tag == "655")
						#simplest_mapping_with_repeatable_node($concept_s $field "a" $root "E41_Appellation" "#ecrm('E41_Appellation')" $P1_is_identified_by)
					#end
					#if($tag == "600")
						#simplest_mapping_with_repeatable_node("#ecrm('E4_Period')" $field "y" $root "E41_Appellation" "#ecrm('E41_Appellation')" $P87_is_identified_by)
						#simplest_mapping_with_repeatable_node($E53_Place $field "z" $root "E44_Place_Appellation" "#ecrm('E44_Place_Appellation')" $P87_is_identified_by)
					#end	
				#end	
			#end	
    	#end	
	#end	
#end	

##Item
#if ($frbr.itemID && !$frbr.itemID.isEmpty())
	#foreach($entry in $frbr.itemID.entrySet())
		#set($tag = $entry.getKey())
		#set($uris = $entry.getValue())
		#if ($uris && !$uris.isEmpty())
			#set($fields = $xpath.many("datafield[@tag='${tag}']",$root))
			#foreach($uri in $uris) 
				#set($field = $fields.get($velocityCount))
				#if($field)	
	        		#set($item_s = "#uri_literal('F5_Item' $uri)")
	        		$item_s $is_a #efrbroo('F5_Item') .
					#simplest_mapping_with_repeatable_node($item_s $field "a" $root "E39_Actor" "#ecrm('E39_Actor')" "#ecrm('P49_has_former_or_current_keeper')")
					#simplest_mapping_with_repeatable_node($item_s $field "b" $root "E39_Actor" "#ecrm('E39_Actor')" "#ecrm('P49_has_former_or_current_keeper')")
					#simplest_mapping_with_repeatable_node($item_s $field "m" $root "E42_Identifier" "#ecrm('E42_Identifier')" $P1_is_identified_by)
				#end	
			#end	
    	#end	
	#end	
#end	
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "a" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "b" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "c" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "d" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "e" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "f" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "g" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "h" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "6" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "355" "8" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_no_repeatable_tag($F4_Manifestation_Singleton "357" "a" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_no_repeatable_tag($F4_Manifestation_Singleton "357" "b" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_no_repeatable_tag($F4_Manifestation_Singleton "357" "c" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_no_repeatable_tag($F4_Manifestation_Singleton "357" "g" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_no_repeatable_tag($F4_Manifestation_Singleton "357" "6" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_no_repeatable_tag($F4_Manifestation_Singleton "357" "8" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "506" "a" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "506" "b" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "506" "c" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "506" "d" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "506" "e" $root "E30_Right" "#ecrm('E30_Right')" $P104_is_subject_to)
#simplest_mapping_with_repeatable_tag($F4_Manifestation_Singleton "490" "l" $root "E42_Identifier" "#ecrm('E42_Identifier')" $P1_is_identified_by)

##Event
#simplest_mapping_with_repeatable_tag("#ecrm('E4_Period')" "518" "a" $root "E41_Appellation" "#ecrm('E41_Appellation')" $P87_is_identified_by)